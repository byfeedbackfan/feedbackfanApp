<ion-header class="ion-no-border" #header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="closeModal()">
        <ion-icon slot="start" name="arrow-back-outline" class="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>
      {{ 'detalle_mensaje' | translate }}
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="send-message-content" scrollEvents="true" appHideHeader [header]="header">
    <ion-list class="inputs-list" lines="none">
      <ion-item class="input-item">
        <h5 class="title-values">
          {{ messageDetail.title }}
        </h5>
      </ion-item>
      <ion-item class="input-item">
        <ion-label >
          <p class="date-values">
            {{ messageDetail.date }}
          </p>
          <h4 class="from-values">
            {{ 'de' | translate }}{{ messageDetail.from }}
          </h4>
          <h4 class="to-values">
            {{'para' | translate}}{{ messageDetail.to }}
          </h4>
        </ion-label>
      </ion-item>
    </ion-list>
    <ion-card>
      <ion-card-content>
        <div [innerHTML]="messageDetail.message | safeHtml">
        </div>
      </ion-card-content>
    </ion-card>
    <ion-row>
      <ion-col size="4" class="col-role-values">
        <ion-chip color="dark" mode="ios" outline="true">
          <p class="text-values" *ngIf="messageDetail | filterMessagePublishable">
            {{ 'publicado' | translate }}
          </p>
          <p class="text-values" *ngIf="!(messageDetail | filterMessagePublishable)">
            {{ 'no_publicado' | translate }}
          </p>
        </ion-chip> 
      </ion-col>
      <ion-col size="4"  class="col-role-values likes">
        <ion-chip color="dark" mode="ios" outline="true">
          <p class="text-values" *ngIf="shearchUserInLikesArray(messageDetail)">
            {{ 'me_gusta' | translate }}
          </p>
          <p class="text-values" *ngIf="shearchUserDislikesArray(messageDetail)">
            {{ 'no_me_gusta' | translate }}
          </p>
          <p class="text-values" *ngIf="!shearchUserDislikesArray(messageDetail) && !shearchUserInLikesArray(messageDetail)">
            {{ 'no_calificado' | translate }}
          </p>
        </ion-chip>
      </ion-col>
      <ion-col size="4">
        <ion-row>
          <ion-col size="6" class="calification-values">
            <p class="p1">
              {{messageDetail.likes || '0' | shortNumberSuffix}}
              <ion-icon slot="start" name="thumbs-up-sharp"></ion-icon>
            </p>
          </ion-col>
          <ion-col size="6" class="calification-values">
            <p class="p2">
              {{messageDetail.dislikes || '0' | shortNumberSuffix}}
              <ion-icon slot="start" name="thumbs-down-sharp"></ion-icon>
            </p>
          </ion-col>
        </ion-row>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="4" class="col-role-values margin-chip">
        <ion-chip color="dark" mode="ios" outline="true">
          <p class="text-values" *ngIf="messageDetail.isPublishableSender">
            {{ 'emisor' | translate}} {{ 'publicable' | translate }}
          </p>
          <p class="text-values" *ngIf="!messageDetail.isPublishableSender">
            {{ 'emisor' | translate}} {{ 'no_publicable' | translate }}
          </p>
        </ion-chip>
      </ion-col>
      <ion-col size="4" class="col-role-values margin-chip likes">
        <ion-chip color="dark" mode="ios" outline="true">
          <p class="text-values" *ngIf="messageDetail.isPublishableReceiver">
            {{ 'receptor' | translate}} {{ 'publicable' | translate }}
          </p>
          <p class="text-values" *ngIf="!messageDetail.isPublishableReceiver">
            {{ 'receptor' | translate}} {{ 'no_publicable' | translate }}
          </p>
        </ion-chip>
      </ion-col>
    </ion-row>
    <ion-row *ngIf="userLogged.email === messageDetail.to">
      <ion-col size="12">
        <ion-item lines="none" (click)="changePublishableMessage()">
          <p class="label-size"> {{ 'valido_para_publicar' | translate}}</p>
          <ion-toggle class="toggle-options" slot="end" [ngModel]="messageDetail.isPublishableReceiver"></ion-toggle>
        </ion-item>
      </ion-col>
    </ion-row>
</ion-content>